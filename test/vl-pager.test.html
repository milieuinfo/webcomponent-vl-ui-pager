<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <script src="../../@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>

  <script type="module" src="../vl-pager.src.js"></script>
</head>

<body>
  <test-fixture id="vl-pager-fixture">
    <template>
      <vl-pager total-items="100" items-per-page="10" current-page="1"></vl-pager>
    </template>
  </test-fixture>

  <script>
    suite('vl-pager', () => {
      const should = chai.should();

      setup((done) => {
        customElements.whenDefined('vl-pager').then(done);
      });

      test('bevat een container met de juiste class zodat de stijl goed toegepast wordt', () => {
        const pager = fixture('vl-pager-fixture');
        assert.isTrue(pager._element.classList.contains("vl-pager"));
      });

      test('de component bevat de juiste data', () => {
        const pager = fixture('vl-pager-fixture');
        assert.equal(pager.totalPages,10);
        assert.equal(pager.totalItems,100);
        assert.equal(pager.currentPage,1);
        assert.equal(pager.itemsPerPage,10);
        assert.equal(pager.firstItemNrOfPage,1);
        assert.equal(pager.lastItemNrOfPage,10);
        assert.equal(pager.lastPage,10);
      });

      test('kunnen de pagina veranderen door de "current-page" attribuut', () => {
        const pager = fixture('vl-pager-fixture');
        pager.setAttribute("current-page",2);
        assert.equal(pager.totalPages,10);
        assert.equal(pager.totalItems,100);
        assert.equal(pager.currentPage,2);
        assert.equal(pager.itemsPerPage,10);
        assert.equal(pager.firstItemNrOfPage,11);
        assert.equal(pager.lastItemNrOfPage,20);
        assert.equal(pager.lastPage,10);
      });

      test('navigatie buttons verandert de "current-page" attribuut en triggert "changed" event', (done) => {
        const pager = fixture('vl-pager-fixture');
        pager.addEventListener('changed',()=> {
          assert.equal(pager.currentPage,2);
          done();
        });
        pager.shadowRoot.querySelector("#pageForwardLink").click();
      });
    });
  </script>
</body>

</html>
